<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jdjhaha.vocab.vocab.mapper.VocabGroupMapper">

	<select id="selectData" parameterType="hashMap"
		resultType="hashMap">
		select
			vgm.group_code,
			vg.group_name,
			vgm.vocab_count,
			vg.username
		from
			voca_group vg,
			(
			select
				group_code,
				count(group_code) as vocab_count,
				username
			from
				vocab_group_mapping
			group by
				group_code,
				username) vgm
		where
			vgm.group_code = vg.group_code
			and vg.username = #{username}
		order by
			vg.group_code desc
	</select>
	
	<insert id="insertData" parameterType="hashMap">
		insert into voca_group(group_name, username) values(#{group_name},#{username})
	</insert>
	
	<delete id="deleteData" parameterType="hashMap">
    	delete
    	  from voca_group
    	  where  group_code=#{group_code}
    	      and username=#{username}
    </delete>
</mapper>  